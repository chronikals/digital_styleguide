/**
 * Script from Branding Website
 */

var makeVideoPlayableInline = function() {
    "use strict";
    function e(e) {
        function a(r) {
            t = requestAnimationFrame(a),
                e(r - (n || r)),
                n = r
        }
        var t, n;
        this.start = function() {
            t || a(0)
        }
            ,
            this.stop = function() {
                cancelAnimationFrame(t),
                    t = null,
                    n = 0
            }
    }
    function a(e, a, t, n) {
        function r(a) {
            Boolean(e[t]) === Boolean(n) && a.stopImmediatePropagation(),
                delete e[t]
        }
        return e.addEventListener(a, r, !1),
            r
    }
    function t(e, a, t, n) {
        function r() {
            return t[a]
        }
        function i(e) {
            t[a] = e
        }
        n && i(e[a]),
            Object.defineProperty(e, a, {
                get: r,
                set: i
            })
    }
    function n(e, a, t) {
        t.addEventListener(a, function() {
            return e.dispatchEvent(new Event(a))
        })
    }
    function r(e, a) {
        Promise.resolve().then(function() {
            e.dispatchEvent(new Event(a))
        })
    }
    function i(e) {
        var a = new Audio;
        return n(e, "play", a),
            n(e, "playing", a),
            n(e, "pause", a),
            a.crossOrigin = e.crossOrigin,
            a.src = e.src || e.currentSrc || "data:",
            a
    }
    function o(e, a, t) {
        (_ || 0) + 200 < Date.now() && (e[w] = !0,
            _ = Date.now()),
        t || (e.currentTime = a),
            T[++S % 3] = 100 * a | 0
    }
    function s(e) {
        return e.driver.currentTime >= e.video.duration
    }
    function d(e) {
        var a = this;
        a.video.readyState >= a.video.HAVE_FUTURE_DATA ? (a.hasAudio || (a.driver.currentTime = a.video.currentTime + e * a.video.playbackRate / 1e3,
            a.video.loop && s(a) && (a.driver.currentTime = 0)),
                o(a.video, a.driver.currentTime)) : a.video.networkState !== a.video.NETWORK_IDLE || a.video.buffered.length || a.video.load(),
        a.video.ended && (delete a.video[w],
            a.video.pause(!0))
    }
    function l() {
        var e = this
            , a = e[f];
        return e.webkitDisplayingFullscreen ? void e[h]() : ("data:" !== a.driver.src && a.driver.src !== e.src && (o(e, 0, !0),
                a.driver.src = e.src),
                void (e.paused && (a.paused = !1,
                e.buffered.length || e.load(),
                    a.driver.play(),
                    a.updater.start(),
                a.hasAudio || (r(e, "play"),
                a.video.readyState >= a.video.HAVE_ENOUGH_DATA && r(e, "playing")))))
    }
    function u(e) {
        var a = this
            , t = a[f];
        t.driver.pause(),
            t.updater.stop(),
        a.webkitDisplayingFullscreen && a[y](),
        t.paused && !e || (t.paused = !0,
        t.hasAudio || r(a, "pause"),
        a.ended && (a[w] = !0,
            r(a, "ended")))
    }
    function c(a, t) {
        var n = a[f] = {};
        n.paused = !0,
            n.hasAudio = t,
            n.video = a,
            n.updater = new e(d.bind(n)),
            t ? n.driver = i(a) : (a.addEventListener("canplay", function() {
                    a.paused || r(a, "playing")
                }),
                    n.driver = {
                        src: a.src || a.currentSrc || "data:",
                        muted: !0,
                        paused: !0,
                        pause: function() {
                            n.driver.paused = !0
                        },
                        play: function() {
                            n.driver.paused = !1,
                            s(n) && o(a, 0)
                        },
                        get ended() {
                            return s(n)
                        }
                    }),
            a.addEventListener("emptied", function() {
                var e = !n.driver.src || "data:" === n.driver.src;
                n.driver.src && n.driver.src !== a.src && (o(a, 0, !0),
                    n.driver.src = a.src,
                    e ? n.driver.play() : n.updater.stop())
            }, !1),
            a.addEventListener("webkitbeginfullscreen", function() {
                a.paused ? t && !n.driver.buffered.length && n.driver.load() : (a.pause(),
                        a[h]())
            }),
        t && (a.addEventListener("webkitendfullscreen", function() {
            n.driver.currentTime = a.currentTime
        }),
            a.addEventListener("seeking", function() {
                T.indexOf(100 * a.currentTime | 0) < 0 && (n.driver.currentTime = a.currentTime)
            }))
    }
    function g(e) {
        var n = e[f];
        e[h] = e.play,
            e[y] = e.pause,
            e.play = l,
            e.pause = u,
            t(e, "paused", n.driver),
            t(e, "muted", n.driver, !0),
            t(e, "playbackRate", n.driver, !0),
            t(e, "ended", n.driver),
            t(e, "loop", n.driver, !0),
            a(e, "seeking"),
            a(e, "seeked"),
            a(e, "timeupdate", w, !1),
            a(e, "ended", w, !1)
    }
    function m(e, a, t) {
        void 0 === a && (a = !0),
        void 0 === t && (t = !0),
        t && !p || e[f] || (c(e, a),
            g(e),
            e.classList.add("IIV"),
        !a && e.autoplay && e.play(),
        "MacIntel" !== navigator.platform && "Windows" !== navigator.platform || console.warn("iphone-inline-video is not guaranteed to work in emulated environments"))
    }
    var _, v = "undefined" == typeof Symbol ? function(e) {
            return "@" + (e || "@") + Math.random()
        }
        : Symbol, p = /iPhone|iPod/i.test(navigator.userAgent) && void 0 === document.head.style.grid, f = v(), w = v(), h = v("nativeplay"), y = v("nativepause"), T = [], S = 0;
    return m.isWhitelisted = p,
        m
}();
!function(e, a, t) {
    var n, n = {
        base: document.querySelector("[data-experience-base]").dataset.experienceBase || "",
        resolution: {
            landscape: "1440x900",
            portrait: "700x1245"
        },
        modes: [{
            resolution: "1440x900",
            media: t.breakpoints.landscape
        }, {
            resolution: "700x1245",
            media: t.breakpoints.portrait
        }],
        extensions: ["mp4", "m4v", "webm", "ogv"],
        videos: {
            s1_video_1: "Section_A",
            s3_video_1: "Section_C",
            s4_video_1: "Section_D_Animation_02_pt1-4"
        },
        getVideoName: function(e) {
            return n.videos[e]
        },
        getVideoUrl: function(e, a, r, i) {
            r = r || n.getQuality(),
                i = i || n.getResolution(),
                a = a || t.video.default_extension;
            var o = n.base + "media/" + r + "/eh5v.files/html5video/" + e + "_" + i + "." + a;
            return o
        },
        getResolution: function() {
            return a.mq(t.breakpoints.landscape) ? n.resolution.landscape : n.resolution.portrait
        },
        getQuality: function() {
            var e = window.innerWidth;
            return e < 700 ? "low" : e < 1024 ? "normal" : "high"
        },
        generateVideoType: function(e) {
            var a = e;
            switch (e) {
                case "m4v":
                    a = "mp4";
                    break;
                case "webm":
                    a = "webm";
                    break;
                case "ogv":
                    a = "ogg"
            }
            return "video/" + a
        },
        loadVideoSources: function() {
            for (var e = document.querySelectorAll("[data-autosource]"), a = 0; a < e.length; a++) {
                var t = e[a];
                n.initVideo(t)
            }
        },
        initVideo: function(e) {
            var a = e.getAttribute("id")
                , t = n.getVideoName(a)
                , r = n.getVideoUrl(t, "jpg");
            e.poster = r,
                n.initSources(e, t)
        },
        initSources: function(e, a) {
            for (var t = ["mp4", "m4v", "webm", "ogv"], r = 0; r < t.length; r++) {
                var i = t[r]
                    , o = n.generateVideoType(i)
                    , s = n.getVideoUrl(a, i)
                    , d = document.createElement("source");
                d.src = s,
                "mp4" !== i && (d.type = o),
                    e.appendChild(d)
            }
            makeVideoPlayableInline(e, !1)
        },
        playOnTouch: function(e, t) {
            1 != a.audiopreload && document.addEventListener("DOMContentLoaded", function() {
                var a = function(r) {
                    n.smartPlay(t),
                    "s4_video_1" === t.id && e.removeEventListener("touchstart", a)
                };
                e.addEventListener("touchstart", a)
            })
        },
        smartPlay: function(e) {
            e.play()
        },
        playVideoTo: function(e, a) {
            function t(n) {
                e.currentTime > a && (e.pause(),
                    e.removeEventListener("timeupdate", t))
            }
            e.currentTime <= a ? (e.addEventListener("timeupdate", t),
                    e.play()) : (e.pause(),
                    e.currentTime = a)
        }
    };
    e.media = n
}(window, Modernizr, settings),
    media.loadVideoSources(),
    TweenLite.defaultOverwrite = !1,
    function(e) {
        "use strict";
        e.g = function(e) {
            return document.getElementById(e)
        }
            ,
            e.slides = [],
            e.getPrevSlide = function() {
                return e.slides[slides.length - 2]
            }
            ,
            e.ctrl = new ScrollMagic.Controller({
                globalSceneOptions: {
                    triggerHook: 0
                }
            })
    }(window),
    function(e) {
        var a = function(e) {};
        e.isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        var t = function() {
            if (!e.isMobile)
                for (var t = document.querySelectorAll("video"), n = t.length, r = 0, i = 0; i < n; i++)
                    !function(e, i) {
                        t[e].oncanplaythrough = function() {
                            r++,
                            r == n && (a("all videos loaded"),
                                i.preloader.updateStatus())
                        }
                    }(i, e)
        }
            , n = function() {
            a("all images loaded"),
                e.preloader.updateStatus()
        }
            , r = function() {
            this.iterator = 0
        };
        r.prototype.checkStatus = function() {
            (2 == this.iterator || e.isMobile && 1 == this.iterator) && (a("all loaded"),
                e.preloaderElement.style.display = "none")
        }
            ,
            r.prototype.updateStatus = function() {
                this.iterator++,
                    this.checkStatus()
            }
            ,
            e.preloader = new r,
            e.addEventListener("load", n, !1),
            e.addEventListener("DOMContentLoaded", function() {
                e.preloaderElement = document.querySelector(".abb-preloader")
            }, !1),
            e.addEventListener("DOMContentLoaded", t, !1)
    }(window),
    function() {
        var e = {
            timing: 1,
            nodes: {
                area_global: g("s1_area"),
                area_1: g("s1_area_part_1"),
                area_2: g("s1_area_part_2"),
                area_3: g("s1_area_part_3"),
                area_4: g("s1_area_part_4"),
                slide: g("s1_slide"),
                header: g("s1_header"),
                follow: g("s1_follow"),
                summary: g("s1_summary"),
                video: g("s1_video_1")
            }
        };
        if (e.nodes.area_global && !settings.freeze) {
            slides.push(e),
                media.playOnTouch(e.nodes.slide, e.nodes.video);
            var a = new TimelineMax;
            a.from(e.nodes.slide, e.timing / 2, {
                autoAlpha: 0
            }, .1).from(e.nodes.header, e.timing / 2, {
                autoAlpha: 0,
                yPercent: "35%",
                ease: Power2.easeOut
            }, 0);
            var t = (new ScrollMagic.Scene({
                triggerElement: e.nodes.area_1
            }).setTween(a).addTo(ctrl),
                new TimelineMax);
            t.from(e.nodes.follow, e.timing / 2, {
                autoAlpha: 0,
                yPercent: "35%",
                ease: Power2.easeOut
            }, 0);
            var n = (new ScrollMagic.Scene({
                triggerElement: e.nodes.area_2
            }).setTween(t).addTo(ctrl),
                new TimelineMax);
            n.from(e.nodes.summary, e.timing / 2, {
                autoAlpha: 0,
                yPercent: "35%",
                ease: Power2.easeOut
            }, 0);
            new ScrollMagic.Scene({
                triggerElement: e.nodes.area_3
            }).setTween(n).addTo(ctrl)
        }
    }(),
    function() {
        var e = {
            timing: 1,
            timing_reset: "-=" + this.timing,
            text_color: "white",
            nodes: {
                area_global: g("s2_area"),
                area_1: g("s2_area_part_1"),
                area_2: g("s2_area_part_2"),
                area_3: g("s2_area_part_3"),
                area_4: g("s2_area_part_4"),
                area_5: g("s2_area_part_5"),
                area_background: g("s2_area_part_background"),
                slide: g("s2_slide"),
                curtain: g("s2_curtain"),
                header: g("s2_header"),
                follow: g("s2_follow"),
                summary: g("s2_summary"),
                image_container: g("s2_image_container"),
                image_1: g("s2_image_1"),
                image_2: g("s2_image_2"),
                image_3: g("s2_image_3")
            }
        };
        if (e.nodes.area_global && !settings.freeze) {
            slides.push(e);
            var a = new TimelineMax
                , t = getPrevSlide();
            "undefined" != typeof t && a.to(t.nodes.slide, e.timing, {
                yPercent: "-100",
                ease: Power2.easeOut
            }, 0),
                a.to(e.nodes.slide, e.timing / 10, {
                    autoAlpha: 1
                }, .1).from(e.nodes.curtain, e.timing / 2, {
                    autoAlpha: 0,
                    width: "0",
                    ease: Power2.easeOut
                }, 1).from(e.nodes.header, e.timing / 2, {
                    autoAlpha: 0,
                    y: "35%",
                    ease: Power2.easeOut
                }, 1);
            var n = (new ScrollMagic.Scene({
                triggerElement: e.nodes.area_1
            }).setTween(a).addTo(ctrl),
                new TimelineMax);
            n.from(e.nodes.follow, e.timing / 2, {
                autoAlpha: 0,
                y: "35%",
                ease: Power2.easeOut
            });
            var r = (new ScrollMagic.Scene({
                triggerElement: e.nodes.area_3
            }).setTween(n).addTo(ctrl),
                new TimelineMax);
            r.from(e.nodes.summary, e.timing / 2, {
                autoAlpha: 0,
                y: "35%",
                ease: Power2.easeOut
            });
            var i = (new ScrollMagic.Scene({
                triggerElement: e.nodes.area_4
            }).setTween(r).addTo(ctrl),
                new TimelineMax);
            i.add("image1Start").fromTo(e.nodes.image_1, 2 * e.timing, {
                scale: 1
            }, {
                scale: 1.05
            }).to(e.nodes.image_1, 8 * e.timing, {
                rotation: 4,
                scale: 1.1
            }, "image1Start+=2").fromTo(e.nodes.image_2, 2 * e.timing, {
                scale: 1,
                rotation: 0,
                autoAlpha: .8
            }, {
                scale: 1.25,
                rotation: 8,
                autoAlpha: .4
            }, "image1Start+=1").to(e.nodes.image_2, e.timing, {
                scale: 3.5,
                autoAlpha: 0
            }, "image1Start+=3").fromTo(e.nodes.image_3, 2 * e.timing, {
                scale: 1,
                rotation: 0,
                autoAlpha: .6
            }, {
                scale: 1.19,
                rotation: 8,
                autoAlpha: .4
            }, "image1Start+=4").to(e.nodes.image_3, 2 * e.timing, {
                scale: 1.44,
                rotation: 24,
                autoAlpha: .2
            }, "image1Start+=5").to(e.nodes.image_3, e.timing, {
                scale: 3.5,
                autoAlpha: 0
            }, "image1Start+=6");
            var o = "90%";
            e.nodes.area_background.style.top = "10%",
                e.nodes.area_background.style.height = o;
            new ScrollMagic.Scene({
                triggerElement: e.nodes.area_background,
                duration: "150%"
            }).setTween(i).addTo(ctrl)
        }
    }(),
    function() {
        var e = {
            timing: 1,
            timing_reset: "-=" + this.timing,
            text_color: "white",
            nodes: {
                area_global: g("s3_area"),
                area_1: g("s3_area_1"),
                area_2: g("s3_area_2"),
                area_3: g("s3_area_3"),
                area_4: g("s3_area_4"),
                slide: g("s3_slide"),
                curtain: g("s3_curtain"),
                header: g("s3_header"),
                follow: g("s3_follow"),
                summary: g("s3_summary"),
                video: g("s3_video_1")
            }
        };
        if (e.nodes.area_global && !settings.freeze) {
            slides.push(e),
                media.playOnTouch(e.nodes.slide, e.nodes.video);
            var a = new TimelineMax
                , t = getPrevSlide();
            "undefined" != typeof t && a.to(t.nodes.slide, e.timing, {
                yPercent: "-100",
                ease: Power2.easeOut
            }, 0),
                a.to(e.nodes.slide, e.timing / 10, {
                    autoAlpha: 1
                }, .1).from(e.nodes.curtain, e.timing / 2, {
                    autoAlpha: 0,
                    width: "0",
                    ease: Power2.easeOut
                }, 1).from(e.nodes.header, e.timing / 2, {
                    autoAlpha: 0,
                    y: "35%",
                    ease: Power2.easeOut
                }, 1);
            var n = (new ScrollMagic.Scene({
                triggerElement: e.nodes.area_1
            }).setTween(a).addTo(ctrl),
                new TimelineMax);
            n.from(e.nodes.follow, e.timing / 2, {
                autoAlpha: 0,
                y: "35%",
                ease: Power2.easeOut
            }, 0);
            var r = (new ScrollMagic.Scene({
                triggerElement: e.nodes.area_2
            }).setTween(n).addTo(ctrl),
                new TimelineMax);
            r.from(e.nodes.summary, e.timing / 2, {
                autoAlpha: 0,
                y: "35%",
                ease: Power2.easeOut
            }, 0);
            new ScrollMagic.Scene({
                triggerElement: e.nodes.area_3
            }).setTween(r).addTo(ctrl)
        }
    }(),
    function() {
        var e = {
            timing: 1,
            text_color: "white",
            nodes: {
                area_global: g("s4_area"),
                area_1: g("s4_area_1"),
                area_2: g("s4_area_2"),
                area_3: g("s4_area_3"),
                area_4: g("s4_area_4"),
                slide: g("s4_slide"),
                curtain: g("s4_curtain"),
                header: g("s4_header"),
                follow: g("s4_follow"),
                summary: g("s4_summary"),
                media_1: g("s4_media_1"),
                video_1: g("s4_video_1")
            }
        };
        if (e.nodes.area_1 && !settings.freeze) {
            slides.push(e),
                media.playOnTouch(e.nodes.slide, e.nodes.video_1);
            var a = new TimelineMax
                , t = getPrevSlide();
            "undefined" != typeof t && a.to(t.nodes.slide, e.timing, {
                yPercent: "-100",
                ease: Power2.easeOut
            }, 0),
                a.to(e.nodes.slide, e.timing / 10, {
                    autoAlpha: 1
                }, .1).from(e.nodes.curtain, e.timing / 2, {
                    autoAlpha: 0,
                    ease: Power2.easeOut,
                    width: "0"
                }, 1).from(e.nodes.header, e.timing / 2, {
                    autoAlpha: 0,
                    yPercent: "35%",
                    ease: Power2.easeOut
                }, 1);
            var n = (new ScrollMagic.Scene({
                triggerElement: e.nodes.area_1
            }).on("enter", function() {
                media.playVideoTo(e.nodes.video_1, 1)
            }).on("leave", function() {
                setTimeout(function() {
                    media.playVideoTo(e.nodes.video_1, .01)
                }, 2e3 * e.timing)
            }).setTween(a).addTo(ctrl),
                new TimelineMax);
            n.from(e.nodes.follow, e.timing / 2, {
                autoAlpha: 0,
                yPercent: "35%",
                ease: Power2.easeOut
            }, 0);
            var r = (new ScrollMagic.Scene({
                triggerElement: e.nodes.area_2
            }).on("enter", function() {
                media.playVideoTo(e.nodes.video_1, 2)
            }).setTween(n).addTo(ctrl),
                new TimelineMax);
            r.from(e.nodes.summary, e.timing / 2, {
                autoAlpha: 0,
                yPercent: "35%",
                ease: Power2.easeOut
            }, 1);
            new ScrollMagic.Scene({
                triggerElement: e.nodes.area_3
            }).on("enter", function() {
                media.playVideoTo(e.nodes.video_1, 4.24)
            }).setTween(r).addTo(ctrl)
        }
    }(),
    function() {
        function e(e) {
            var t = 0
                , n = 0;
            return 1 == Modernizr.mq(settings.breakpoints.tablet) ? n = "100" : t = "-100",
                TweenMax.from(e, a.timing, {
                    xPercent: t,
                    yPercent: n,
                    ease: Power2.easeOut
                }, 0)
        }
        var a = {
            timing: 1,
            timing_reverse: "-=1",
            text_color: "white",
            nodes: {
                area_global: g("s5_area"),
                area_1: g("s5_area_1"),
                area_2: g("s5_area_2"),
                area_3: g("s5_area_3"),
                area_4: g("s5_area_4"),
                slide: g("s5_slide"),
                curtain: g("s5_curtain"),
                header: g("s5_header"),
                hero_container: g("s5_hero_container"),
                hero_1: g("s5_hero_1"),
                hero_2: g("s5_hero_2"),
                hero_3: g("s5_hero_3"),
                image_1: g("s5_image_1"),
                image_2: g("s5_image_2"),
                image_3: g("s5_image_3"),
                button: g("s5_button")
            }
        };
        if (s5 = a,
            a.nodes.area_global && !settings.freeze) {
            slides.push(a);
            var t = new TimelineMax
                , n = getPrevSlide();
            "undefined" != typeof n && t.to(n.nodes.slide, a.timing, {
                yPercent: "-100",
                ease: Power2.easeOut
            }, 0),
                t.to(a.nodes.slide, a.timing / 10, {
                    autoAlpha: 1
                }, .1).from(a.nodes.curtain, a.timing / 2, {
                    autoAlpha: 0,
                    width: "0",
                    ease: Power2.easeOut
                }, 1).from(a.nodes.header, a.timing / 2, {
                    autoAlpha: 0,
                    y: "35%",
                    ease: Power2.easeOut
                }, 1);
            var r = (new ScrollMagic.Scene({
                triggerElement: a.nodes.area_1
            }).setTween(t).addTo(ctrl),
                e(a.nodes.image_1))
                , i = new TimelineMax;
            i.add(r, "image_1_tween").from(a.nodes.hero_1, a.timing / 2, {
                autoAlpha: 0,
                y: "35%",
                ease: Power2.easeOut
            }, a.timing_reverse);
            var o = (new ScrollMagic.Scene({
                triggerElement: a.nodes.area_2
            }).setTween(i).addTo(ctrl),
                e(a.nodes.image_2))
                , s = new TimelineMax;
            s.add(o, "image_2_tween").from(a.nodes.hero_2, a.timing / 2, {
                autoAlpha: 0,
                y: "35%",
                ease: Power2.easeOut
            }, a.timing_reverse);
            var d = (new ScrollMagic.Scene({
                triggerElement: a.nodes.area_3
            }).setTween(s).addTo(ctrl),
                e(a.nodes.image_3))
                , l = new TimelineMax;
            l.add(d, "image_3_tween").from(a.nodes.hero_3, a.timing / 2, {
                autoAlpha: 0,
                y: "35%",
                ease: Power2.easeOut
            }, a.timing_reverse).from(a.nodes.button, a.timing / 3, {
                autoAlpha: 0
            }, 1);
            var u = (new ScrollMagic.Scene({
                triggerElement: a.nodes.area_4
            }).setTween(l).addTo(ctrl),
                getPrevSlide());
            "undefined" != typeof u && t.to(u.nodes.slide, u.timing / 2, {
                autoAlpha: 0,
                ease: Power2.easeOut
            })
        }
    }();
